# Yoga with Carmen
[View the live project here](https://yoga-with-carmen.herokuapp.com/)

Yoga with Carmen is a website built for the yoga teacher Carmen Ferraro. The website allows Carmen to showcase her work, publish classes, set maximum available spaces, and display them on a calendar. Users can sign up, view, comment, and like posts, book classes, and comment on their reservations. The purpose of the website is mainly informative. It provides an exhaustive description of the disciplines practiced, allowing users who want to start a yoga journey to have a better understanding of the courses.
Yoga with Carmen targets people interested in yoga and would like to start or keep practicing it; it also targets people with physical pain problems due to bad posture and helps them resolve them through exercise.

<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140879/Readme%20images/responsive_pspvkh.png">

## DESIGN PLANNING:
The design of the website has been implemented using Balsamiq wireframes. The wireframes allowed me to sketch prototypes of the web pages so that I had a clear visual idea of how the website should have looked like.

- ### Home Page
<img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140881/Readme%20images/home_page_wireframe_tijs2d.png">

- ### About Page
<img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140878/Readme%20images/about_page_wireframe_dkuq69.png">

- ### Classes Page
<img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140881/Readme%20images/classes_types_page_wireframe_irka8n.png">

- ### Blog Page
<img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140882/Readme%20images/blog_page_wireframe_hhdxhv.png">

- ### Info Page
<img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140881/Readme%20images/info_page_wireframe_mfkydu.png">

- ### Book Page
<img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140878/Readme%20images/book_page_wireframe_hhfiut.png">

- ### Reservations Page
<img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140881/Readme%20images/reservation_page_wireframe_emfaxh.png">

## USER STORIES:
### As User:
- [View yoga types](https://github.com/MartinaP87/power-yoga/issues/26)
- [View info](https://github.com/MartinaP87/power-yoga/issues/27)
- [View post list](https://github.com/MartinaP87/power-yoga/issues/2)
- [Site pagination](https://github.com/MartinaP87/power-yoga/issues)
- [Open a post](https://github.com/MartinaP87/power-yoga/issues/11)
- [View comments](https://github.com/MartinaP87/power-yoga/issues/9)
- [View Likes](https://github.com/MartinaP87/power-yoga/issues/10)
- [Account registration](https://github.com/MartinaP87/power-yoga/issues/8)

### As Signed In User:
- [View classes](https://github.com/MartinaP87/power-yoga/issues/14)
- [Book a class](https://github.com/MartinaP87/power-yoga/issues/16)
- [View reservations](https://github.com/MartinaP87/power-yoga/issues/18)
- [Delete reservation](https://github.com/MartinaP87/power-yoga/issues/17)
- [Add note](https://github.com/MartinaP87/power-yoga/issues/19)
- [Edit note](https://github.com/MartinaP87/power-yoga/issues/20)
- [Delete note](https://github.com/MartinaP87/power-yoga/issues/21)
- [View comments]()
- [Comment on a post](https://github.com/MartinaP87/power-yoga/issues/7)
- [Like / Unlike](https://github.com/MartinaP87/power-yoga/issues/6)

### As Admin:
- [Log in as an admin](https://github.com/MartinaP87/power-yoga/issues/1)
- [Create a draft yoga type](https://github.com/MartinaP87/power-yoga/issues/22)
- [Manage yoga types](https://github.com/MartinaP87/power-yoga/issues/24)
- [Create a draft yoga class](https://github.com/MartinaP87/power-yoga/issues/23)
- [Manage yoga classes](https://github.com/MartinaP87/power-yoga/issues/25)
- [Create draft posts](https://github.com/MartinaP87/power-yoga/issues/4)
- [Manage posts](https://github.com/MartinaP87/power-yoga/issues/5)
- [Approve comments](https://github.com/MartinaP87/power-yoga/issues/3)

## FEATURES:

### Navbar
 <img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140882/Readme%20images/navbar_2_zs6izt.png">

- The fully responsive navigation bar appears on all pages;
- It includes links to the Logo, Home page, About, Classes, Blog, Sign-in, and Sign Up page and is identical on each page to allow for easy navigation.
- When the user is logged in, the navbar also displays a link to Book and Reservations, which are restricted areas;
- This section will allow the user to easily navigate from page to page across all devices without reverting to the previous page via the ‘back’ button;
- When the screen size reduces to the breakpoint, the navbar collapse into a hamburger menu.

### Callout Section
 <img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140882/Readme%20images/callout_ik9agz.png">

- It displays a message that encourages the user to sign up;
- It includes a link to the Sign Up page to facilitate the process.


### Introduction Section
 <img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140880/Readme%20images/introduction_rwxehu.png">

- The introduction section will allow the user to have a quick overview of the purpose of the site and the yoga types practiced;
- In this section, the user will see the benefits of this practice. This should motivate the user to participate in the classes.

### Today's Classes Section
 <img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140882/Readme%20images/todays_class_xcmqst.png">

- This section  is displayed when there is/are a class/es on the current day;
- It shows the class details so that the user can make a booking or have a reminder;
- When there are no classes on the current day, the section doesn't show.

### Quotes Section
 <img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140882/Readme%20images/quotes_ne849k.png">

- This section provides the  user feedback about the course;
- It motivates the user to subscribe and participate in the classes.

### Footer
 <img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140881/Readme%20images/footer_nhty5a.png">

- The footer section includes links to Carmen's social media sites;
- The links will open to a new tab to allow easy navigation for the user;
- The footer is helpful to the user as it encourages them to keep connected via social media;
- This section appears on all pages.

### Yoga Benefits Section
 <img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140880/Readme%20images/yoga_benefits_mhad2b.png">

- This section explains to the user the additional values yoga can bring to their life.

### My Passion For Yoga Section
<img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140881/Readme%20images/my_passion_for_yoga_qm64xb.png">

- Describes Carmen's first steps into yoga discipline and the journey that brought her to become a yoga teacher;
- The experience presented in the section gives the user the feel of a human connection since he can now relate to Carmen as a real person.

### Yoga Class Section
<img src ="https://res.cloudinary.com/dxihsonor/image/upload/v1672140879/Readme%20images/class_type_card_q077im.png">

- This section has an image to allow the user to have a visual acknowledgment of the exercises practiced in the class;
- This section has a button that opens a modal whit the full description of what the class involves to allow the user to understand which yoga type suits them best;
- The modal contains a button that redirects the user to the booking page;
- If the user is not signed in, the button in the modal doesn't display.

### Post Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140881/Readme%20images/blog_post_mvm6ov.png">

- This section has an image to allow the user to have a visual acknowledgment of what the post is about;
- It has a title that links to the specific page of the post;
- Under the title is displayed the date when the post was published and the number of likes.

### Post Page Title Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140880/Readme%20images/post_page_title_dwffym.png">

- This section displays the title of the post on which the user previously clicked;
- Under the title, it displays the username of the publisher and the date when the post was published.

### Post Page Content Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140880/Readme%20images/post_content_aesnjp.png">

- This section displays the content of the post that the user chose.

### Like Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140882/Readme%20images/post_like_vyzqkl.png">

- This section displays the number of likes that the relevant post received;
- If signed in, the user can click on the heart icon to leave a like and click again to remove it;
- This section adds interactivity to the website and allows to leave effortless feedback to show appreciation;
- If not signed in, the user can only view the likes, and clicking on the icon won't have any effect.

### Messages Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140882/Readme%20images/post_commented_h7a56x.png">

- This section displays the number of comments that the relevant post received.

### Comments Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140878/Readme%20images/comments_hkajiu.png">

- This section displays the approved comments written by the admin and users, along with the username and date related to them;
- The comments are ordered by date, with the most recent at the top;
- This section allows the user easily follow the conversation.

### Comments Form Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140880/Readme%20images/comment_form_m9ihmv.png">

- This section displays a form that allows the user to leave feedback;
- Through this section, the user can interact with other users;
- Once the comment is submitted, the user receives feedback about the successful submission and the approval status.

### Info Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140879/Readme%20images/info_xqxbmd.png">

- This section displays the studio's location, which is where the classes take place;
- It displays the yoga teacher's contact details so the user can get in touch with her for any inquiry.

### Booking Form Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140879/Readme%20images/booking_form_jppwsr.png">

- This section displays a form to make a reservation for a class;
- The dropdown menu displays the classes present on the calendar, and the user can choose from them;
- Once the form is submitted, the user receives feedback on whether the booking has been successful or not, and in that case, it explains the reason for the failure.

### Calendar Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140881/Readme%20images/calendar_aggttp.png">

- This section displays a table with the time slots and the days of the current and next week;
- The days row updates automatically so that the current week is always close-up;
- Every time a class is published is displayed on the calendar in the relevant cell;
- This disposition facilitates the view of the classes for a better time planning for the user.

### Reservations Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140883/Readme%20images/reservations_i0w6c1.png">

- This section displays the classes booked by the logged-in user and the relative details;
- If the user leaves a note about a class, it displays under the relevant reservation;
- Every reservation has a delete button that, when clicked, calls a modal to receive confirmation of deletion;
- This section is a reminder for the user of the booked classes.

### Notes Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140878/Readme%20images/note_qbvjtd.png">

- This section displays notes written by the user;
- Every note is under the reservation it refers to;
- This section is private, so only the logged-in user can access it;
- Next to each note, there is an edit button that links to an edit note page;
- Next to the edit button, there is a delete button that, when clicked, calls a modal to confirm the deletion.

### Add Notes Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140882/Readme%20images/add_note_form_lweg9t.png">

- This section displays a form that allows the user to add a note to a reservation;
- The user can choose the reservation to comment on from a dropdown menu.

### Edit Notes Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140880/Readme%20images/edit_note_form_opngw7.png">

- This section displays a form that allows the user to edit a note;
- The updated note takes the place of the previous one under the relevant reservation.

### Sign Up Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140882/Readme%20images/sign_up_eqxmf9.png"> 

- This section allows the user to create a private account through which they can book classes, write notes, like and comment on posts; 
- The section displays a paragraph for users that already have an account, inviting them to click on the sign-in button to redirect them to the sign-in form;
- The section has a form requesting the user's information to create an account;
If the form is not filled correctly, it displays error  messages relative to the issue;
- Once the form is filled up correctly, the submission redirects the user to the home page and shows a success message.

### Login Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140883/Readme%20images/sign_in_jcuqlh.png">

- This section allows the user to sign in to their private account through which they can book classes, write notes, like and comment on posts; 
- The section displays a paragraph for users that don't already have an account, inviting them to click on the sign-up button to redirect them to the sign-up form;
- The section has a form requesting the user's information to login into their account;
- If the form is not filled correctly, it displays error  messages relative to the issue;
- Once the form is filled up correctly, the submission redirects the user to the home page and shows a success message;
- Under the form, the section displays a 'remember me' thick box. If the user selects it, it saves the details for the next visit;
- Under the thick box, there is a 'forgot password?' link, that redirects the user to a form to reset the password.

### Logout Section
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140879/Readme%20images/sign_out_nmcfng.png">

- The section requests the user a logout confirmation;
- Once logged out, the user is redirected to the home page and won't be able to access the restricted areas;
- After the logout, a feedback message displays to acknowledge the user about the outcome of the action.

## Future Features To Implement
- A filtration system to view only the available classes in the booking form;
- A mail system that allows the users to receive an email when the admin deletes or updates a class previously booked;
- A mail system that sends a 'free week classes' when a user signs up;
- A feature to display live classes;
- A system to store classes videos and sell them as packages;
- A payment system to buy lessons packages;
- A feature to buy a package and send it as a gift, making sure that only one device can access it.

## Testing:

- I have conducted the testing of all models, forms, and views HTTPResponses using the Django built-in tool Unittes. From settings.py I commented out the Postgres DATABASE and used instead:
**DATABASES = {**
  **'default': {**
      **'ENGINE': 'django.db.backends.sqlite3',**
      **'NAME': BASE_DIR / 'db.sqlite3',**
  **}**
**}**

### Manual Testing
- I have conducted manual testing using print statements and/or checking the outcomes on the browser. 
The results are described underneath:

### Bookings Views
<img src="https://res.cloudinary.com/dxihsonor/image/upload/v1672140878/Readme%20images/python_testing_bookings_fvpsra.png">

<table>
<thead>
<tr>
<th>Action or Event</th>
<th>Expected Result</th>
<th>Successful?<th>
</tr>
</thead>
<tbody>
<tr>
<td>reservations function:</td>
</tr>
<tr>
<td>Reservation.objects.all()</td>
<td>Returns a QuerySet that contains all Reservation objects in the database.</td>
<td>Yes</td>
</tr>
<tr>
<td>note_form = NotesForm()</td>
<td>Returns a form with all option values.</td>
<td>Yes</td>
</tr>
<tr>
<td>note_form.fields["reservation"].queryset = Reservation.objects.filter(
                member=request.user)</td>
<td>Filters the note form field reseravtion to only the logedin user's reservations.</td>
<td>Yes</td>
</tr>
<tr>
<td>if request.method == 'POST':
        note_form = NotesForm(request.POST)</td>
<td>The note form is displayed, and the field's options are limited to only the logged-in users.</td>
<td>Yes</td>
</tr>
<tr>
<td>new_note = note_form.save()</td>
<td>The new note instance is created and displayed.</td>
<td>Yes</td>
</tr>
<tr>
<td>get_days function:</td>
</tr>
<tr>
<td>today = date.today()</td>
<td>It picks today's date.</td>
<td>Yes</td>
</tr>
<tr>
<td>start = today - timedelta(days=today.weekday())</td>
<td>It picks the first day of the current week.</td>
<td>Yes</td>
</tr>
<tr>
<td>end = start + timedelta(days=13)</td>
<td>It picks the last day of the following week.</td>
<td>Yes</td>
</tr>
<td>dates = [start + timedelta(days=i) for i in range((end-start).days+1)]</td>
<td>It returns the range of dates between the first day of this week and the last of the following.</td>
<td>Yes</td>
</tr>
<tr>
<td>no_obsolete_classes function:</td>
</tr>
<tr>
<td>yoga_classes = YogaClass.objects.filter(status=1)</td>
<td>Returns a QuerySet that contains all YogaClass objects with status 1 (published) in the database.</td>
<td>Yes</td>
</tr>
<tr>
<td>for yoga_class in yoga_classes:
            if yoga_class.day < week_days[0]:
                yoga_class.delete()</td>
<td>It deletes classes older than this week.</td>
<td>Yes</td>
</tr>
<tr>
<td>yoga_classes_available_now function:</td>
</tr>
<tr>
<td>yoga_classes_available = []
    for yoga_class in yoga_classes:
        if yoga_class.day >= date.today():
            yoga_classes_available.append(yoga_class)</td>
<td>It pushes in the yoga_classes_available array only the classes from today on.</td>
<td>Yes</td>
</tr>
<tr>
<td>check_double_booking function:</td>
</tr>
<tr>
<td>reservation = get_object_or_404(Reservation, id=reservation_id)</td>
<td>It returns a reservation with a specific id, which in our case, is the new reservation id.</td>
<td>Yes</td>
</tr>
<tr>
<td>yoga_class_user_reservations = Reservation.objects.filter(
        yoga_class_id=reservation.yoga_class_id, member=current_user)</td>
<td>It returns all the reservations of the current user and the same class.</td>
<td>Yes</td>
</tr>
<tr>
<td>if yoga_class_user_reservations.count() > 1:
        messages.error(
                request, "You are already booked \
                    in for this class!")
        reservation.delete()</td>
<td>If the user already has a reservation for the class, display an error message.</td>
<td>Yes</td>
</tr>
<tr>
<td>else:
        reserved_class_id = reservation.yoga_class_id
        updated_reservation = update_approval(
                        request, reservation.id)</td>
<td>If the user hasn't a reservation for the class, call the update_approval function.</td>
<td>Yes</td>
</tr>
<tr>
<td>update_approval function:</td>
</tr>
<tr>
<td>reservation = get_object_or_404(Reservation, id=reservation_id)
    reserved_class_id = reservation.yoga_class_id
    queryset = YogaClass.objects.filter(status=1)
    chosen_yoga_class = get_object_or_404(queryset, id=reserved_class_id)</td>
<td>It retrieves the class the user reserved.</td>
<td>Yes</td>
</tr>
<tr>
<td>if chosen_yoga_class.available_spaces > 0:
        reservation.approved
        reservation.save()
    else:
        reservation.approved = False
        reservation.save()</td>
<td>It checks if the chosen class has a number of available_space higher than 0. If it does, the approved status is set to True otherwise is set to False.</td>
<td>Yes</td>
</tr>
<tr>
<td>fully_booked function:</td>
</tr>
<tr>
<td>if reservation.approved:
        messages.success(
            request, 'Your booking was successful!')
        reduce_available_spaces(
            request, reservation.yoga_class_id)</td>
<td>If the reservation is approved, it displays a success message.
</td>
<td>Yes</td>
</tr>
<tr>
<td>reduce_available_spaces function:</td>
</tr>
<tr>
<td>queryset = YogaClass.objects.filter(status=1)
    chosen_yoga_class = get_object_or_404(queryset, id=chosen_class_id)</td>
<td>It retrieves the class just booked.</td>
<td>Yes</td>
</tr>
<tr>
<td>spaces = int(chosen_yoga_class.available_spaces)
    updated_spaces = spaces - 1
    chosen_yoga_class.available_spaces = updated_spaces</td>
<td>It reduces the number of available spaces of the booked yoga class.</td>
<td>Yes</td>
</tr>
<tr>
<td>chosen_yoga_class.save()</td>
<td>It saves the change just made for the next iteration.</td>
<td>Yes</td>
</tr>
<tr>
<td>delete_reservation function:</td>
</tr>
<tr>
<td>reservation.delete()
    increase_available_spaces(request, reserved_class_id)</td>
<td>It deletes the reservation and calls the increase_avaliable_spaces function.</td>
<td>Yes</td>
</tr>
<tr>
<td>increase_avaliable_spaces function:</td>
</tr>
<tr>
<td>queryset = YogaClass.objects.filter(status=1)
    chosen_yoga_class = get_object_or_404(queryset, id=chosen_class_id)</td>
<td>It retrieves the class just booked.</td>
<td>Yes</td>
</tr>
<tr>
<td>spaces = int(chosen_yoga_class.available_spaces)
    updated_spaces = spaces + 1
    chosen_yoga_class.available_spaces = updated_spaces</td>
<td>It increases the number of available spaces for the booked yoga class.</td>
<td>Yes</td>
</tr>
<tr>
<td>chosen_yoga_class.save()</td>
<td>It saves the change just made for the next iteration.</td>
<td>Yes</td>
</tr>
<tr>
<td>valid_reservation function:</td>
</tr>
<tr>
<td>if reservation.yoga_class in bookable_classes:
        check_double_booking(request, reservation.id)</td>
<td>If the reservation is in the correct time frame, it calls the   check_double_booking function.</td>
<td>Yes</td>
</tr>
<td>else:
        messages.error(request, "This class is not longer available")
        reservation.delete()</td>
<td>If the reservation is not in the correct time frame, it displays an error message and deletes the reservation.</td>
<td>Yes</td>
</tr>
<tr>
<td>book function:</td>
</tr>
<tr>
<td>week_days = get_days(request)
    yoga_classes = no_obsolete_classes(request)
    yoga_classes_available = yoga_classes_available_now(request)</td>
<td>It retrieves the classes available for booking.</td>
<td>Yes</td>
</tr>
<tr>
<td>if request.method == 'POST':
        form = ReservationForm(request.POST)
        if form.is_valid():
            form.instance.member_id = request.user.id</td>
<td>The reservation form is displayed, and the field's options are limited to only the logged-in users.</td>
<td>Yes</td>
</tr>
<tr>
<td>new_reservation = form.save()
            valid_reservation(
                request, new_reservation, yoga_classes_available)</td>
<td>It saves the reservation and calls the valid_reservation function to check if it's acceptable.</td>
<td>Yes</td>
</tr>
<tr>
<td>edit_note function:</td>
</tr>
<tr>
<td>note = get_object_or_404(Notes, id=note_id)</td>
<td>It retrieves the note that the user wishes to edit.<td>
<td>Yes</td>
</tr>
<tr>
<td>edit_form = NotesForm(instance=note)
    edit_form.fields["reservation"].queryset = Reservation.objects.filter(
                member=request.user)</td>
<td>It displays the form with the fields prepopulated with the previous values. The reservation field is restricted to the logged-in user reservations.</td>
<td>Yes</td>
</tr>
<tr>
<td>if request.method == 'POST':
        edit_form = NotesForm(request.POST, instance=note)
        if edit_form.is_valid():
            edit_form.save()</td>
<td>If the form is submitted, the view validates it and saves the update note instance.</td>
<td>Yes</td>
</tr>
<tr>
<td>delete_note function:</td>
</tr>
<tr>
<td>note = get_object_or_404(Notes, id=note_id)
    note.delete()</td>
<td>It retrieves the note the user chose and deletes it.</td>
<td>Yes</td>
</tr>
</tbody>
</table>